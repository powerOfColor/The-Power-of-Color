<!DOCTYPE html>

<html>
    <head>
        <script type = "text/javascript" src = "Scripts/jquery-2.1.0.min.js"></script>
        <script type = "text/javascript" src = "Scripts/jquery.sticky.js"></script>
        <script type = "text/javascript" src = "Scripts/jquery-ui-1.10.4.min.js"></script>
        <script type = "text/javascript" src = "bootstrap/js/bootstrap.min.js"></script>
        <script type = "text/javascript" src = "board.js"></script>
        <link rel = "stylesheet" src = "bootstrap/css/bootstrap.min.css">
        <link rel = "stylesheet" type = "text/css" href = "style.css">
        <link rel = "stylesheet" type = "text/css" href = "jquery-ui-1.10.4.min.css">
    </head>
    <body>
        <header>
            <h1>The Power of Color</h1>
        </header>
        <input type = "button" value = "Start Game" id = "startGame">
        <h3 id = "score">Score: 0</h3>
        <table>
          <tr>
            <td>
              <table id="Board">
                <tr id="Row1">
                    <td><div class="Column1 box" id = "11"></div></td>
                    <td><div class="Column1 box" id = "12"></div></td>
                    <td><div class="Column1 box" id = "13"></div></td>
                    <td><div class="Column1 box" id = "14"></div></td>
                </tr>
                <tr id="Row2">
                    <td><div class="Column2 box" id = "21"></div></td>
                    <td><div class="Column2 box" id = "22"></div></td>
                    <td><div class="Column2 box" id = "23"></div></td>
                    <td><div class="Column2 box" id = "24"></div></td>
                </tr>
                <tr id="Row3">
                    <td><div class="Column3 box" id = "31"></div></td>
                    <td><div class="Column3 box" id = "32"></div></td>
                    <td><div class="Column3 box" id = "33"></div></td>
                    <td><div class="Column3 box" id = "34"></div></td>
                </tr>
                <tr id="Row4">
                    <td><div class="Column4 box" id = "41"></div></td>
                    <td><div class="Column4 box" id = "42"></div></td>
                    <td><div class="Column4 box" id = "43"></div></td>
                    <td><div class="Column4 box" id = "44"></div></td>
                </tr>
              </table>
            </td>
            <td>
              <div style = "margin-left: 40px; width: 325px; height: 325px; border-radius: 10px; background-color: #e6ec8b; padding-left: 20px; padding-right: 20px; padding-top: 5px;">
                <h3 style = "text-align: center;">Rules</h3>
                  <p>The object of the game is to make the four corners of the board all one color.</p>
                  <p>Colors are mixed when tiles are combined as follows:</p>
                  <table>
                    <tr>
                      <td>Black</td>
                      <td>+</td>
                      <td style = "color: Red">Red</td>
                      <td>=</td>
                      <td style = "color: Orange">Orange</td>
                    </tr>
                  </table>
                  <table>
                    <tr>
                      <td>Black</td>
                      <td>+</td>
                      <td style = "color: Orange">Orange</td>
                      <td>=</td>
                      <td style = "color: Red">Red</td>
                    </tr>
                  </table>
                  <table>
                    <tr>
                      <td style = "color: Orange">Orange</td>
                      <td>+</td>
                      <td style = "color: Red">Red</td>
                      <td>=</td>
                      <td>Black</td>
                    </tr>
                  </table>
                  <table>
                    <tr>
                      <td style = "color: White">White</td>
                      <td>+</td>
                      <td>X</td>
                      <td>=</td>
                      <td>X</td>
                    </tr>
                  </table>
                  <p>You receive 1,000,000 points for winning.</p>
            </td>
          </tr>
        
    </body>

    <script type = "text/javascript">
        $(document).ready(function() {
            var board;
            var ids = [[11, 12, 13, 14], [21, 22, 23, 24], [31, 32, 33, 34], [41, 42, 43, 44]];
            function populateBoard() {
              for (i = 0; i < board.size; i++) {
                for (j = 0; j < board.size; j++) {
                  if (board.values[i][j] != null) {
                    $("#"+ids[i][j]).html(board.values[i][j])
                    console.log(board.values[i][j], board.colors[i][j]);
                    if (board.colors[i][j] == "Black" || board.colors[i][j] == "Red") {
                      if (board.last[0] == i && board.last[1] == j && board.animate) {
                        console.log(i,j);
                        $("#"+ids[i][j]).animate({"background-color": board.colors[i][j], "color": "White"});
                      }
                      else {
                        $("#"+ids[i][j]).css({"background-color": board.colors[i][j], "color": "White"})
                      }
                    }
                    else {
                      if (board.last[0] == i && board.last[1] == j && board.animate) {
                        $("#"+ids[i][j]).animate({"background-color": board.colors[i][j], "color": "Black"});
                      }
                      else {
                        $("#"+ids[i][j]).css({"background-color": board.colors[i][j], "color": "Black"})
                      }
                    }
                  }
                  else {
                    console.log(board.values[i][j], board.colors[i][j]);
                    $("#"+ids[i][j]).html("");
                    $("#"+ids[i][j]).finish();
                    $("#"+ids[i][j]).css({"background-color": "#CCCCCC"});
                  }
                }
              }
              $("#score").html("Score: " + board.score);
            }
            $(document).keydown(function(e) {
                var keyCodes = [37, 38,  39, 40];
                var keyValues = ["left", "up", "right", "down"]
                var keyCode = e.keyCode || e.which;
                var index = keyCodes.indexOf(keyCode);
                if (index != -1) {
                  if (board.animate = board.move(keyValues[index])) {
                    console.log("next");
                    board.nextMove();
                    populateBoard();
                  }
                  e.preventDefault();
                }
            });
            $("#startGame").click(function() {
              $("#startGame").val("Restart Game");
              board = new Board();
              populateBoard();
            });
        });
    </script>
</html>
