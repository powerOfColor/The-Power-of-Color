<!DOCTYPE html>

<html>
    <head>
        <script type = "text/javascript" src = "Scripts/jquery-2.1.0.min.js"></script>
        <script type = "text/javascript" src = "Scripts/jquery.sticky.js"></script>
        <script type = "text/javascript" src = "Scripts/jquery-ui-1.10.4.min.js"></script>
        <script type = "text/javascript" src = "board.js"></script>
        <link rel = "stylesheet" type = "text/css" href = "style.css">
        <link rel = "stylesheet" type = "text/css" href = "jquery-ui-1.10.4.min.css">
    </head>
    <body>
        <header>
          <table style = "display: block; margin-left: auto; margin-right: auto;">
            <tr>
              <td><img src = "color.png" width = "300px;"/></td>
              <td><div class = "score" id = "score">Score <br> 0</div></td>
            </tr>
          </table>
              <div class = "score" id = "moves" style = "margin-left: 306px; margin-top: -10px;">Moves <br> 0</div>
        </header>
          <input type = "button" value = "Choose Color &#x00A; (3 Left)" id = "chooseColor" style = "margin-left: 50px; width: 100px; height: 50px; position: absolute; margin-top: -50px;">
          <input type = "button" value = "Start Game" id = "startGame" style = "margin-left: 180px; width: 100px; height: 50px; position: absolute; margin-top: -50px;">
          <table id = "choose" style = "background-color: #888888; padding: 5px 5px 5px 5px; border-radius: 10px; margin-top: 10px;">
            <tr>
                <td><div class = "box choice" data-color = "White" style = "background-color: White"></div></td>
                <td><div class = "box choice" data-color = "Black" style = "background-color: Black"></div></td>
                <td><div class = "box choice" data-color = "Red" style = "background-color: Red"></div></td>
                <td><div class = "box choice" data-color = "#FFDD00" style = "background-color: #FFDD00"></div></td>
              </tr>
          </table>
        </table>
        <table style = "display: block; margin-top: 20px;">
          <tr>
            <td>
              <table id="Board" style = "background-color: #888888; padding: 5px 5px 5px 5px; border-radius: 10px; display: block;">
                <tr id="Row1">
                    <td><div class="Column1 box" id = "11"></div></td>
                    <td><div class="Column1 box" id = "12"></div></td>
                    <td><div class="Column1 box" id = "13"></div></td>
                    <td><div class="Column1 box" id = "14"></div></td>
                </tr>
                <tr id="Row2">
                    <td><div class="Column2 box" id = "21"></div></td>
                    <td><div class="Column2 box" id = "22"></div></td>
                    <td><div class="Column2 box" id = "23"></div></td>
                    <td><div class="Column2 box" id = "24"></div></td>
                </tr>
                <tr id="Row3">
                    <td><div class="Column3 box" id = "31"></div></td>
                    <td><div class="Column3 box" id = "32"></div></td>
                    <td><div class="Column3 box" id = "33"></div></td>
                    <td><div class="Column3 box" id = "34"></div></td>
                </tr>
                <tr id="Row4">
                    <td><div class="Column4 box" id = "41"></div></td>
                    <td><div class="Column4 box" id = "42"></div></td>
                    <td><div class="Column4 box" id = "43"></div></td>
                    <td><div class="Column4 box" id = "44"></div></td>
                </tr>
              </table>
            </td>
            <td>
              <div style = "margin-left: 40px; width: 360px; height: 360px; border-radius: 10px; background-color: #e6ec8b; padding-left: 20px; padding-right: 20px; padding-top: 5px; display: block;">
                <h3 style = "text-align: center;">Rules</h3>
                  <p>The object of the game is to make the four corners of the board all one color.</p>
                  <p>Colors are mixed when tiles are combined as follows:</p>
                  <table>
                    <tr>
                      <td>Black</td>
                      <td>+</td>
                      <td style = "color: Red">Red</td>
                      <td>=</td>
                      <td style = "color: #FFBB00">Orange</td>
                    </tr>
                  </table>
                  <table>
                    <tr>
                      <td>Black</td>
                      <td>+</td>
                      <td style = "color: #FFBB00">Orange</td>
                      <td>=</td>
                      <td style = "color: Red">Red</td>
                    </tr>
                  </table>
                  <table>
                    <tr>
                      <td style = "color: #FFBB00">Orange</td>
                      <td>+</td>
                      <td style = "color: Red">Red</td>
                      <td>=</td>
                      <td>Black</td>
                    </tr>
                  </table>
                  <table>
                    <tr>
                      <td style = "color: White">White</td>
                      <td>+</td>
                      <td>X</td>
                      <td>=</td>
                      <td>X</td>
                    </tr>
                  </table>
                  <p>Lastly, you may choose the color of the next appearing tile three times. Choose wisely.</p>
                  <p>You receive 1,000,000 points for winning.</p>
            </td>
          </tr>
        
    </body>

    <script type = "text/javascript">
        $(document).ready(function() {
            $("#chooseColor").hide();
            $("#choose").hide();
            var board;
            var ids = [[11, 12, 13, 14], [21, 22, 23, 24], [31, 32, 33, 34], [41, 42, 43, 44]];
            function populateBoard() {
              for (i = 0; i < board.size; i++) {
                for (j = 0; j < board.size; j++) {
                  if (board.values[i][j] != null) {
                    if (board.values[i][j] >= 1000 && board.values[i][j] < 100000) {
                      $("#"+ids[i][j]).switchClass("box", "smallerBox", 0);
                    }
                    if (board.values[i][j] >= 100000) {
                      $("#"+ids[i][j]).switchClass("smallerBox", "smallerSmallerBox", 0);
                    }
                    $("#"+ids[i][j]).html(board.values[i][j])
                    if (board.colors[i][j] == "Black" || board.colors[i][j] == "Red") {
                      if (board.last[0] == i && board.last[1] == j && board.animate) {
                        $("#"+ids[i][j]).animate({"background-color": board.colors[i][j], "color": "White"});
                      }
                      else {
                        $("#"+ids[i][j]).css({"background-color": board.colors[i][j], "color": "White"})
                      }
                    }
                    else {
                      if (board.last[0] == i && board.last[1] == j && board.animate) {
                        $("#"+ids[i][j]).animate({"background-color": board.colors[i][j], "color": "Black"});
                      }
                      else {
                        $("#"+ids[i][j]).css({"background-color": board.colors[i][j], "color": "Black"})
                      }
                    }
                  }
                  else {
                    $("#"+ids[i][j]).html("");
                    $("#"+ids[i][j]).finish();
                    $("#"+ids[i][j]).css({"background-color": "#CCCCCC"});
                  }
                }
              }
              $("#score").html("Score<br>" + board.score);
              $("#moves").html("Moves<br>" + board.moves);
            }
            $(document).keydown(function(e) {
                var keyCodes = [37, 38,  39, 40];
                var keyValues = ["left", "up", "right", "down"]
                var keyCode = e.keyCode || e.which;
                var index = keyCodes.indexOf(keyCode);
                if (index != -1 && board.choosing == false) {
                  if (board.animate = board.move(keyValues[index])) {
                    board.nextMove();
                    populateBoard();
                  }
                  e.preventDefault();
                }
            });
            $("#startGame").click(function() {
              $("#startGame").val("Restart Game");
              board = new Board();
              $("#chooseColor").show();
              $("#chooseColor").val("Choose Color \n ("+ board.choicesLeft +" Left)");
              $("#choose").hide();
              populateBoard();
            });
            $("")
            $("#chooseColor").click(function() {
              board.choosing = true;
              $("#choose").show();
            });
            $(".choice").click(function() {
              var color = $(this).data("color");
              board.choice = color;
              board.choosing = false;
              board.choicesLeft -= 1;
              $("#chooseColor").val("Choose Color \n ("+ board.choicesLeft +" Left)")
              if (board.choicesLeft <= 0) {
                $("#chooseColor").hide();
              }
              $("#choose").hide();
            })
        });
    </script>
</html>
